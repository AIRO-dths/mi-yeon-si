<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIRO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background: linear-gradient(135deg, #ffdde1, #ee9ca7);
            overflow: hidden;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* 드래그 방지 */
        img {
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            user-drag: none;
        }
        
        /* 선택 방지 */
        * {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        .heart {
            position: absolute;
            width: 20px;
            height: 20px;
            opacity: 0.5;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>') center no-repeat;
            background-size: contain;
            animation: float 25s linear infinite;
        }
        @keyframes float {
            0% { transform: translateY(10vh) translateX(0) rotate(0deg); opacity: 0; }
            5% { opacity: 0.6; }
            95% { opacity: 0.6; }
            100% { transform: translateY(-120vh) translateX(10vw) rotate(720deg); opacity: 0; }
        }
    </style>
</head>
<body>
    <div id="hearts-container"></div>
    <!-- 모달 -->
    <div id="user-info-modal" class="fixed inset-0  flex items-center justify-center z-50 transition-opacity duration-300">
        <div class="bg-white rounded-3xl shadow-2xl p-8 w-full max-w-md transform transition-all duration-300 scale-95 opacity-0" id="modal-content">
            <h2 class="text-2xl font-bold mb-2 text-gray-800 text-center">AIRO</h2>
            <form id="user-info-form" class="space-y-6">
                <div>
                    <label for="username" class="block text-sm font-medium text-gray-600 mb-2">이름</label>
                    <input type="text" id="username" name="username" placeholder="이름을 입력해주세요." required
                        class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-500 bg-gray-50 text-gray-800 transition">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-600 mb-2">성별</label>
                    <div class="grid grid-cols-2 gap-3">
                        <label class="flex items-center justify-center px-4 py-3 border border-gray-300 rounded-xl cursor-pointer has-[:checked]:bg-pink-500 has-[:checked]:text-white has-[:checked]:border-pink-500 transition">
                            <input type="radio" name="gender" value="남자" class="sr-only" required>
                            <span>남자</span>
                        </label>
                        <label class="flex items-center justify-center px-4 py-3 border border-gray-300 rounded-xl cursor-pointer has-[:checked]:bg-pink-500 has-[:checked]:text-white has-[:checked]:border-pink-500 transition">
                            <input type="radio" name="gender" value="여자" class="sr-only">
                            <span>여자</span>
                        </label>
                    </div>
                </div>


                <button type="submit"
                    class="w-full bg-pink-500 text-white font-bold py-3 px-4 rounded-xl hover:bg-pink-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 transition-transform duration-200 hover:scale-105 mt-8 !mt-10">
                    대화 시작하기
                </button>
            </form>
        </div>
    </div>

    <!-- 채팅 -->
    <main id="chat-container" class="hidden h-screen w-screen relative overflow-hidden p-4 md:p-8 flex flex-col justify-end">
        <!-- 배경 하트 애니메잇녀 -->
        <div class="absolute inset-0 flex items-center justify-center z-0">
            <svg class="w-2/3 h-2/3 text-pink-200 opacity-40" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18.25l-1.45-1.32C4.52 12.91 2 10.5 2 7.5 2 4.95 4.02 3 6.5 3c1.48 0 2.9.73 3.5 1.87C10.6 3.73 12.02 3 13.5 3 15.98 3 18 4.95 18 7.5c0 3-2.52 5.41-6.55 9.43L10 18.25z" clip-rule="evenodd" />
            </svg>
        </div>

        <!-- 캐릭터 -->
        <div class="absolute inset-0 flex items-center justify-center z-10 pointer-events-none">
            <img src="./char.png" alt="Character" class="object-contain w-2/3 md:w-1/2 h-auto max-h-[80vh]">
        </div>
        <!-- 대화창 / 선택지 -->
        <div class="relative z-20 w-full flex flex-col items-center">
                
            <div id="dialogue-container" class="w-full max-w-3xl mx-auto bg-white/80 backdrop-blur-md rounded-xl p-4 md:p-6 mb-3 shadow-lg shadow-pink-100 border border-2 border-pink-300">
                <p id="speaker-name" class="text-2xl font-bold text-pink-600 text-left">캐릭터</p>

                <div id="dialogue-box" class="text-gray-800 min-h-[70px] flex items-center justify-center">
                    <p id="dialogue-text" class="text-center w-full text-lg md:text-xl">대화 내용</p>
                </div>
            </div>

            <div id="choice-container" class="w-full max-w-3xl mx-auto flex flex-col items-center gap-3">
                <button class="w-full bg-white/90 backdrop-blur-md text-gray-800 font-semibold py-4 px-6 rounded-xl hover:bg-white focus:outline-none focus:ring-2 focus:ring-pink-400 transition-all duration-300 shadow-md shadow-pink-100">
                    선택지1
                </button>
                <button class="w-full bg-white/90 backdrop-blur-md text-gray-800 font-semibold py-4 px-6 rounded-xl hover:bg-white focus:outline-none focus:ring-2 focus:ring-pink-400 transition-all duration-300 shadow-md shadow-pink-100">
                    선택지2
                </button>
                <button class="w-full bg-white/90 backdrop-blur-md text-gray-800 font-semibold py-4 px-6 rounded-xl hover:bg-white focus:outline-none focus:ring-2 focus:ring-pink-400 transition-all duration-300 shadow-md shadow-pink-100">
                    선택지3
                </button>
            </div>
            
        </div>
    </main>

    <script>
        const heartsContainer = document.getElementById('hearts-container');
        const userInfoModal = document.getElementById('user-info-modal');
        const modalContent = document.getElementById('modal-content');
        const userInfoForm = document.getElementById('user-info-form');
        const usernameInput = document.getElementById('username');
        const chatContainer = document.getElementById('chat-container');

        let userName = '';

        document.addEventListener('contextmenu', function(e) {e.preventDefault();return false;});
        document.addEventListener('dragstart', function(e) {e.preventDefault();return false;});
        document.addEventListener('selectstart', function(e) {e.preventDefault();return false;});

        for (let i = 0; i < 20; i++) {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.style.left = `${Math.random() * 100}vw`;
            heart.style.animationDuration = `${15 + Math.random() * 10}s`;
            heart.style.animationDelay = `${Math.random() * 15}s`;
            heart.style.width = `${15 + Math.random() * 15}px`;
            heart.style.height = heart.style.width;
            heartsContainer.appendChild(heart);
        }

        window.onload = () => {
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
            }, 100);
        };

        userInfoForm.addEventListener('submit', (e) => {
            e.preventDefault();
            userName = usernameInput.value.trim();
            const gender = document.querySelector('input[name="gender"]:checked')?.value;

            if (userName && gender) {
                modalContent.classList.add('scale-95', 'opacity-0');
                userInfoModal.classList.add('opacity-0');

                setTimeout(() => {
                    userInfoModal.classList.add('hidden');
                    chatContainer.classList.remove('hidden');
                    startChat(gender);
                }, 300);
            }
        });
    
    </script>
</body>
</html>

